(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21abe5"],{bd8e:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("Query Explorer")]),t._v("See "),a("a",{attrs:{href:"https://activitywatch.readthedocs.io/en/latest/querying-data.html"}},[t._v("the documentation")]),t._v(" for help on how to write queries."),a("hr"),t.error?a("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]):t._e(),a("form",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[t._v("Start"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.startdate,expression:"startdate"}],staticClass:"form-control",attrs:{type:"date",max:t.today},domProps:{value:t.startdate},on:{input:function(e){e.target.composing||(t.startdate=e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[t._v("End"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.enddate,expression:"enddate"}],staticClass:"form-control",attrs:{type:"date",max:t.tomorrow},domProps:{value:t.enddate},on:{input:function(e){e.target.composing||(t.enddate=e.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.query_code,expression:"query_code"}],staticClass:"form-control",staticStyle:{"font-family":"monospace"},attrs:{rows:"4"},domProps:{value:t.query_code},on:{input:function(e){e.target.composing||(t.query_code=e.target.value)}}})]),a("div",{staticClass:"form-inline"},[a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.query()}}},[t._v("Query")])]),a("span",{staticStyle:{"padding-left":"1em"}}),t._v(t._s(t.eventcount_str))])]),a("hr"),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.vis_method,expression:"vis_method"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.vis_method=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"eventlist"}},[t._v("Event List")]),a("option",{attrs:{value:"timeline"}},[t._v("Timeline")]),a("option",{attrs:{value:"summary"}},[t._v("Summary")]),a("option",{attrs:{value:"raw"}},[t._v("Raw JSON")])])]),"timeline"==t.vis_method?a("div",[a("aw-timeline",{attrs:{type:"simple",event_type:t.event_type,events:t.events}})],1):t._e(),"eventlist"==t.vis_method?a("div",[a("aw-eventlist",{attrs:{events:t.events}})],1):t._e(),"summary"==t.vis_method?a("div",[a("input",{directives:[{name:"model",rawName:"v-model.lazy.trim",value:t.summaryKey,expression:"summaryKey",modifiers:{lazy:!0,trim:!0}}],staticClass:"form-control",staticStyle:{"margin-bottom":"1em"},attrs:{type:"text",placeholder:"data key"},domProps:{value:t.summaryKey},on:{change:function(e){t.summaryKey=e.target.value.trim()},blur:function(e){return t.$forceUpdate()}}}),a("aw-summary",{attrs:{fields:t.events,colorfunc:t.colorfunc,namefunc:t.namefunc}})],1):t._e(),"raw"==t.vis_method?a("div",[a("pre",[t._v(t._s(t.events))])]):t._e()])},s=[],n=a("c1df"),o=a.n(n);const i=o()().startOf("day"),m=o()(i).add(24,"hours");var u={name:"QueryExplorer",data(){return{query_code:'afk_events = query_bucket(find_bucket("aw-watcher-afk_"));\nwindow_events = query_bucket(find_bucket("aw-watcher-window_"));\nwindow_events = filter_period_intersect(window_events, filter_keyvals(afk_events, "status", ["not-afk"]));\nmerged_events = merge_events_by_keys(window_events, ["app", "title"]);\nRETURN = sort_by_duration(merged_events);',vis_method:"eventlist",event_type:"currentwindow",events:[],today:i.format(),tomorrow:m.format(),error:"",startdate:i.format("YYYY-MM-DD"),enddate:m.format("YYYY-MM-DD"),summaryKey:"",colorfunc:null,namefunc:null}},computed:{eventcount_str:function(){return Array.isArray(this.events)?"Number of events: "+this.events.length:""}},mounted:function(){this.colorfunc=this.summaryKeyFunc,this.namefunc=this.summaryKeyFunc},methods:{query:async function(){const t=this.query_code.split(";").map(t=>t.trim()+";"),e=[o()(this.startdate).format()+"/"+o()(this.enddate).format()];try{const a=await this.$aw.query(e,t);this.events=a[0],this.error=""}catch(a){this.error=a.response.data.message}},summaryKeyFunc:function(t){return t.data[this.summaryKey]}}},d=u,c=a("2877"),l=Object(c["a"])(d,r,s,!1,null,"762719f2",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d21abe5.77aa66c7.js.map