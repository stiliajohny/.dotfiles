(function(e){function t(t){for(var a,r,o=t[0],c=t[1],u=t[2],d=0,l=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&l.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);f&&f(t);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==s[o]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={index:0},s={index:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-09bc37bc":"64e9d24e","chunk-1704d656":"d747acf5","chunk-22291cfb":"4eff2ece","chunk-2aac73c2":"4ce7c7c3","chunk-2ba3acfc":"f6ee4202","chunk-2d0c0d7f":"685bc92a","chunk-2d0c76ef":"f6e733e5","chunk-2d0c7b05":"08ce3746","chunk-2d0c7f23":"2aac33c9","chunk-2d0c8a76":"e4c138cb","chunk-0e0e08d4":"031e7460","chunk-88e324ee":"ee676729","chunk-0de517b8":"2b474ff9","chunk-481c03fc":"84eddfd5","chunk-4b8d39cb":"ef774457","chunk-64b133d7":"2b1c8ac7","chunk-a1ed062e":"94d89691","chunk-2d0c912a":"9aa8bf4a","chunk-2d0d6e9b":"2e58ce34","chunk-2d0e4e00":"2a555d78","chunk-2d217e1c":"ccc81f3d","chunk-2d21a3d2":"98c90e56","chunk-2d21abe5":"77aa66c7","chunk-30e0364b":"4c5eb3a5","chunk-34d4cb4e":"5eb8cbdc","chunk-3cb932d2":"dc73c63f","chunk-53b16d6c":"cf2ec731","chunk-604b6336":"42c13d78","chunk-7cf84ed0":"136afa58","chunk-8136d428":"1db2359f","chunk-85351898":"48020a37"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-09bc37bc":1,"chunk-2ba3acfc":1,"chunk-0e0e08d4":1,"chunk-0de517b8":1,"chunk-481c03fc":1,"chunk-4b8d39cb":1,"chunk-64b133d7":1,"chunk-a1ed062e":1,"chunk-30e0364b":1,"chunk-34d4cb4e":1,"chunk-53b16d6c":1,"chunk-604b6336":1,"chunk-7cf84ed0":1,"chunk-8136d428":1,"chunk-85351898":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-09bc37bc":"d19517d9","chunk-1704d656":"31d6cfe0","chunk-22291cfb":"31d6cfe0","chunk-2aac73c2":"31d6cfe0","chunk-2ba3acfc":"5e3fab43","chunk-2d0c0d7f":"31d6cfe0","chunk-2d0c76ef":"31d6cfe0","chunk-2d0c7b05":"31d6cfe0","chunk-2d0c7f23":"31d6cfe0","chunk-2d0c8a76":"31d6cfe0","chunk-0e0e08d4":"6e09dfe7","chunk-88e324ee":"31d6cfe0","chunk-0de517b8":"3af5a466","chunk-481c03fc":"f40517e3","chunk-4b8d39cb":"f371213f","chunk-64b133d7":"fb929b1e","chunk-a1ed062e":"70dd7d35","chunk-2d0c912a":"31d6cfe0","chunk-2d0d6e9b":"31d6cfe0","chunk-2d0e4e00":"31d6cfe0","chunk-2d217e1c":"31d6cfe0","chunk-2d21a3d2":"31d6cfe0","chunk-2d21abe5":"31d6cfe0","chunk-30e0364b":"afab8877","chunk-34d4cb4e":"d9210f9c","chunk-3cb932d2":"31d6cfe0","chunk-53b16d6c":"aadd2687","chunk-604b6336":"c52383a8","chunk-7cf84ed0":"c5111b1c","chunk-8136d428":"660d3ffe","chunk-85351898":"372e986c"}[e]+".css",s=c.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var u=i[o],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===a||d===s))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){u=l[o],d=u.getAttribute("data-href");if(d===a||d===s)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],f.parentNode.removeChild(f),n(i)},f.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){r[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=i);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}s[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var f=d;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0794":function(e,t,n){"use strict";var a=n("c641"),r=n.n(a),s=n("9380"),i=n.n(s),o=n("8a30"),c=n.n(o),u=n("2769"),d=n.n(u),l=n("dd61"),f=n.n(l);function h(e){return e.split(";").filter(e=>e).map(e=>e+";")}function p(e){return`\n    events  = flood(query_bucket("${e.bid_window}"));\n    not_afk = flood(query_bucket("${e.bid_afk}"));\n    not_afk = filter_keyvals(not_afk, "status", ["not-afk"]);\n    ${e.filter_afk?"events  = filter_period_intersect(events, not_afk);":""}\n  `}function _(e,t,n,a,r,s,i){e=e.replace('"','\\"'),t=t.replace('"','\\"');const o={bid_window:e,bid_afk:t,classes:s,filter_afk:r},c=`\n      ${p(o)}\n      events = categorize(events, ${JSON.stringify(o.classes)});\n    `+(i?`events = filter_keyvals(events, "$category", ${JSON.stringify(i)});`:"")+`\n    title_events = sort_by_duration(merge_events_by_keys(events, ["app", "title"]));\n    app_events   = sort_by_duration(merge_events_by_keys(title_events, ["app"]));\n    cat_events   = sort_by_duration(merge_events_by_keys(events, ["$category"]));\n\n    events = sort_by_timestamp(events);\n    app_events  = limit_events(app_events, ${n});\n    title_events  = limit_events(title_events, ${a});\n    duration = sum_durations(events);\n    RETURN  = {"app_events": app_events, "title_events": title_events, "cat_events": cat_events, "duration": duration, "active_events": not_afk};`;return h(c)}function m(e,t=5){e=e.replace('"','\\"');const n=`\n    events  = query_bucket("${e}");\n    events  = merge_events_by_keys(events, ["app"]);\n    events  = sort_by_duration(events);\n    events  = limit_events(events, ${t});\n    total_duration = sum_durations(events);\n    RETURN  = {"events": events, "total_duration": total_duration};\n  `;return h(n)}const b={chrome:["Google-chrome","chrome.exe","Chromium","Google Chrome","Chromium-browser","Chromium-browser-chromium","Google-chrome-beta","Google-chrome-unstable","Brave-browser"],firefox:["Firefox","Firefox.exe","firefox","firefox.exe","Firefox Developer Edition","firefoxdeveloperedition","Firefox Beta","Nightly"],opera:["opera.exe","Opera"],brave:["brave.exe"],vivaldi:["Vivaldi-stable","Vivaldi-snapshot","vivaldi.exe"]};function v(e){const t=f()(Object.keys(b),t=>{const n=d()(e,e=>c()(e,t));return[t,n]});return i()(t,([,e])=>void 0!==e)}function y(e){let t=`\n    ${p({...e,filter_afk:!1})}\n    window = events;\n    events = [];\n  `;return r()(v(e.bid_browsers),([n,a])=>{const r=JSON.stringify(b[n]);t+=`events_${n} = flood(query_bucket("${a}"));\n       window_${n} = filter_keyvals(window, "app", ${r});\n       ${e.filter_afk?`window_${n} = filter_period_intersect(window_${n}, not_afk);`:""}\n       events_${n} = filter_period_intersect(events_${n}, window_${n});\n       events_${n} = split_url_events(events_${n});\n       events = sort_by_timestamp(concat(events, events_${n}));`}),t}function k(e,t,n,a=5,r=!0){e=f()(e,e=>e.replace('"','\\"')),t=t.replace('"','\\"'),n=n.replace('"','\\"');const s={bid_window:t,bid_afk:n,bid_browsers:e,classes:{},filter_afk:r};return h(`${y(s)}\n    urls = merge_events_by_keys(events, ["url"]);\n    urls = sort_by_duration(urls);\n    urls = limit_events(urls, ${a});\n    domains = split_url_events(events);\n    domains = merge_events_by_keys(domains, ["$domain"]);\n    domains = sort_by_duration(domains);\n    domains = limit_events(domains, ${a});\n    duration = sum_durations(events);\n    RETURN = {"domains": domains, "urls": urls, "duration": duration};`)}function g(e,t){let n=["events = [];"];for(let a of e)a=a.replace('"','\\"'),n.push('events = concat(events, flood(query_bucket("'+a+'")));');return n=n.concat(['files = sort_by_duration(merge_events_by_keys(events, ["file", "language"]));',"files = limit_events(files, "+t+");",'languages = sort_by_duration(merge_events_by_keys(events, ["language"]));',"languages = limit_events(languages, "+t+");",'projects = sort_by_duration(merge_events_by_keys(events, ["project"]));',"projects = limit_events(projects, "+t+");","duration = sum_durations(events);",'RETURN = {"files": files, "languages": languages, "projects": projects, "duration": duration};']),n}function w(e){return e=e.replace('"','\\"'),['afkbucket = "'+e+'";',"not_afk = flood(query_bucket(afkbucket));",'not_afk = merge_events_by_keys(not_afk, ["status"]);',"RETURN = not_afk;"]}function $(e){return e=e.replace('"','\\"'),[`events = query_bucket("${e}");`,"RETURN = sum_durations(events);"]}t["a"]={windowQuery:_,browserSummaryQuery:k,appQuery:m,dailyActivityQuery:w,dailyActivityQueryAndroid:$,editorActivityQuery:g}},"0a4f":function(e,t,n){"use strict";n.r(t),n.d(t,"defaultCategories",(function(){return s})),n.d(t,"build_category_hierarchy",(function(){return i})),n.d(t,"flatten_category_hierarchy",(function(){return o})),n.d(t,"saveClasses",(function(){return c})),n.d(t,"loadClasses",(function(){return u})),n.d(t,"loadClassesForQuery",(function(){return d}));const a=n("2ef0"),r=">",s=[{name:["Work"],rule:{type:"regex",regex:"Google Docs"}},{name:["Work","Programming"],rule:{type:"regex",regex:"GitHub|Stack Overflow"}},{name:["Work","Programming","ActivityWatch"],rule:{type:"regex",regex:"ActivityWatch|aw-",ignore_case:!0}},{name:["Media","Games"],rule:{type:"regex",regex:"Minecraft|RimWorld"}},{name:["Media","Video"],rule:{type:"regex",regex:"YouTube|Plex"}},{name:["Media","Social Media"],rule:{type:"regex",regex:"reddit|Facebook|Twitter|Instagram",ignore_case:!0}},{name:["Comms","IM"],rule:{type:"regex",regex:"Messenger|Telegram|Signal|WhatsApp"}},{name:["Comms","Email"],rule:{type:"regex",regex:"Gmail"}}];function i(e){function t(e){const t=e.name;return e.name_pretty=t.join(r),e.subname=t.slice(-1)[0],e.parent=t.length>1?t.slice(0,-1):null,e.depth=t.length-1,e}const n=e.slice().map(e=>t(e)),a=new Set(n.map(e=>e.name.join(r)));function s(n){n.map(e=>e.parent).filter(e=>!!e).map(n=>{const i=n.join(r);if(n&&!a.has(i)){const r=t({name:n,rule:{type:null}});e.push(r),a.add(i),s([r])}})}function i(t){return t.map(t=>{return t.children=e.filter(e=>{return!(!e.parent||!t.name)&&JSON.stringify(e.parent)==JSON.stringify(t.name)}),i(t.children),t})}return s(n),i(e.filter(e=>!e.parent))}function o(e){return a.flattenDeep(e.map(e=>{const t=[e,o(e.children)];return e.children=[],t}))}function c(e){localStorage.classes=JSON.stringify(e),console.log("Saved classes",localStorage.classes)}function u(){const e=localStorage.classes;return e&&e.length>=1?JSON.parse(e):s}function d(){return u().filter(e=>null!==e.rule.type).map(e=>{return[e.name,e.rule]})}},"17bb":function(e,t,n){"use strict";var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{c(a.next(e))}catch(t){s(t)}}function o(e){try{c(a["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(i,o)}c((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n("d567");class s{constructor(e,t={}){if(this.heartbeatQueues={},this.clientname=e,this.testing=t.testing||!1,"undefined"===typeof t.baseURL){const e=t.testing?5666:5600;this.baseURL=`http://127.0.0.1:${e}`}else this.baseURL=t.baseURL;this.req=r.default.create({baseURL:this.baseURL+"/api",timeout:3e4})}getInfo(){return a(this,void 0,void 0,(function*(){return this.req.get("/0/info").then(e=>e.data)}))}ensureBucket(e,t,n){return a(this,void 0,void 0,(function*(){try{yield this.req.post(`/0/buckets/${e}`,{client:this.clientname,type:t,hostname:n})}catch(a){if(a&&a.response&&304===a.response.status)return{alreadyExist:!0};throw a}return{alreadyExist:!1}}))}createBucket(e,t,n){return a(this,void 0,void 0,(function*(){yield this.req.post(`/0/buckets/${e}`,{client:this.clientname,type:t,hostname:n})}))}deleteBucket(e){return a(this,void 0,void 0,(function*(){yield this.req.delete(`/0/buckets/${e}?force=1`)}))}getBuckets(){return a(this,void 0,void 0,(function*(){let e=(yield this.req.get("/0/buckets/")).data;return Object.keys(e).forEach(t=>{e[t].created=new Date(e[t].created),e[t].last_updated&&(e[t].last_updated=new Date(e[t].last_updated))}),e}))}getBucketInfo(e){return a(this,void 0,void 0,(function*(){let t=(yield this.req.get(`/0/buckets/${e}`)).data;return t.created=new Date(t.created),t}))}getEvents(e,t){return a(this,void 0,void 0,(function*(){let n=(yield this.req.get("/0/buckets/"+e+"/events",{params:t})).data;return n.forEach(e=>{e.timestamp=new Date(e.timestamp)}),n}))}countEvents(e,t,n){return a(this,void 0,void 0,(function*(){const a={starttime:t?t.toISOString():null,endtime:n?n.toISOString():null};return this.req.get("/0/buckets/"+e+"/events/count",{params:a})}))}insertEvent(e,t){return a(this,void 0,void 0,(function*(){return this.insertEvents(e,[t]).then(e=>e[0])}))}insertEvents(e,t){return a(this,void 0,void 0,(function*(){let n=(yield this.req.post("/0/buckets/"+e+"/events",t)).data;return Array.isArray(n)||(n=[n]),n.forEach(e=>{e.timestamp=new Date(e.timestamp)}),n}))}replaceEvent(e,t){return a(this,void 0,void 0,(function*(){if(void 0===t.id)throw"Can't replace event without ID assigned";return this.insertEvent(e,t)}))}deleteEvent(e,t){return a(this,void 0,void 0,(function*(){yield this.req.delete("/0/buckets/"+e+"/events/"+t)}))}heartbeat(e,t,n){return this.heartbeatQueues.hasOwnProperty(e)||(this.heartbeatQueues[e]={isProcessing:!1,data:[]}),new Promise((a,r)=>{this.heartbeatQueues[e].data.push({onSuccess:a,onError:r,pulsetime:t,heartbeat:n}),this.updateHeartbeatQueue(e)})}query(e,t){return a(this,void 0,void 0,(function*(){const n={query:t,timeperiods:e.map(e=>{return"string"!==typeof e?`${e.start.toISOString()}/${e.end.toISOString()}`:e})};return(yield this.req.post("/0/query/",n)).data}))}send_heartbeat(e,t,n){return a(this,void 0,void 0,(function*(){let a=(yield this.req.post("/0/buckets/"+e+"/heartbeat?pulsetime="+t,n)).data;return a.timestamp=new Date(a.timestamp),a}))}updateHeartbeatQueue(e){const t=this.heartbeatQueues[e];if(!t.isProcessing&&t.data.length){const{pulsetime:n,heartbeat:a,onSuccess:r,onError:s}=t.data.shift();t.isProcessing=!0,this.send_heartbeat(e,n,a).then(n=>{r(),t.isProcessing=!1,this.updateHeartbeatQueue(e)}).catch(n=>{s(n),t.isProcessing=!1,this.updateHeartbeatQueue(e)})}}}t.AWClient=s},"56d7":function(e,t,n){"use strict";n.r(t);n("e792");var a=n("2b0e"),r=n("5f5b"),s=(n("f9e3"),n("2dd8"),n("859b")),i=(n("d355"),n("dcba"),n("93c6")),o=n.n(i),c=n("5acd"),u=n("c1df"),d=n.n(u);a["default"].filter("shortdate",(function(e){return d()(e).format("YYYY-MM-DD")})),a["default"].filter("shorttime",(function(e){return d()(e).format("HH:mm")})),a["default"].filter("friendlytime",(function(e){return Object(c["friendlydate"])(e)})),a["default"].filter("iso8601",(function(e){return d.a.parseZone(e).format()})),a["default"].filter("friendlyduration",(function(e){return Object(c["seconds_to_duration"])(e)})),a["default"].prototype.filters={orderBy:o.a};var l=n("8c4f");const f=()=>n.e("chunk-2d21a3d2").then(n.bind(null,"bb51")),h=()=>n.e("chunk-7cf84ed0").then(n.bind(null,"8884")),p=()=>n.e("chunk-22291cfb").then(n.bind(null,"add8")),m=()=>n.e("chunk-2d0d6e9b").then(n.bind(null,"7529")),b=()=>n.e("chunk-2d0e4e00").then(n.bind(null,"91a3")),v=()=>n.e("chunk-2d0c7f23").then(n.bind(null,"537f")),y=()=>n.e("chunk-3cb932d2").then(n.bind(null,"ba29")),k=()=>n.e("chunk-53b16d6c").then(n.bind(null,"59e7")),g=()=>n.e("chunk-2d217e1c").then(n.bind(null,"c92b")),w=()=>n.e("chunk-2d21abe5").then(n.bind(null,"bd8e")),$=()=>n.e("chunk-2aac73c2").then(n.bind(null,"f67a")),q=()=>n.e("chunk-2ba3acfc").then(n.bind(null,"f836")),x=()=>n.e("chunk-8136d428").then(n.bind(null,"26d3")),S=()=>n.e("chunk-85351898").then(n.bind(null,"eb8a")),O=()=>n.e("chunk-2d0c0d7f").then(n.bind(null,"4409"));a["default"].use(l["a"]);const C=new l["a"]({routes:[{path:"/",component:f},{path:"/activity/android/:host/:date?",component:y,props:!0},{path:"/activity/:host/:periodLength?/:date?",component:h,props:!0,children:[{path:"summary",meta:{subview:"summary"},name:"activity-daily-summary",component:p,props:!0},{path:"window",meta:{subview:"window"},name:"activity-daily-window",component:m,props:!0},{path:"browser",meta:{subview:"browser"},name:"activity-daily-browser",component:b},{path:"editor",meta:{subview:"editor"},name:"activity-daily-editor",component:v},{path:"",redirect:"summary"}]},{path:"/buckets",component:k},{path:"/buckets/:id",component:g,props:!0},{path:"/timeline",component:$},{path:"/query",component:w},{path:"/log",component:q},{path:"/settings",component:x},{path:"/stopwatch",component:S},{path:"/dev",component:O}]});var j=C,E=n("2f62"),B=n("9380"),P=n.n(B),A=n("dd61"),D=n.n(A),R=n("5492"),M=n.n(R),N=n("8a30"),Q=n.n(N),T=n("3852"),U=n.n(T),I=n("0794"),W=n("0a4f");const L=100;function H(e){return{start:Object(c["get_day_start_with_offset"])(e),length:[1,"day"]}}function F(e){const t=d()(e.start).format(),n=d()(t).add(e.length[0],e.length[1]).format();return[t,n].join("/")}const G={top_apps:[],top_titles:[],browser_duration:[],top_domains:[],top_urls:[],editor_duration:[],top_editor_files:[],top_editor_languages:[],top_editor_projects:[],top_categories:[],active_events:[],active_duration:0,active_history:{},query_options:{browser_buckets:"all",editor_buckets:"all"},editor_buckets_available:[],browser_buckets_available:[]};function J(e){const t=[];for(let n=-15;n<=15;n++){const a=d()(e.start).add(n*e.length[0],e.length[1]).format();t.push({...e,start:a})}return t}function Y(e){return J(e).map(F)}const V={getActiveHistoryAroundTimeperiod:e=>t=>{const n=Y(t),a=n.map(t=>{return U()(e.active_history,t)?e.active_history[t]:[{timestamp:d()(t.split("/")[0]).format(),duration:0,data:{}}]});return a}},z={async ensure_loaded({commit:e,state:t,dispatch:n},a){console.info("Query options: ",a),!t.loaded||t.query_options!==a||a.force?(e("start_loading",a),a.timeperiod||(a.timeperiod=H(a.date)),await n("get_buckets",a),await n("query_window",a),await n("query_browser",a),await n("query_editor",a),await n("query_active_history",a)):console.warn("ensure_loaded called twice with same query_options but without query_options.force = true, skipping...")},async query_window({commit:e},{host:t,timeperiod:n,filterAFK:a,filterCategories:r}){const s=d()(),i=[F(n)],o=Object(W["loadClassesForQuery"])(),c="aw-watcher-window_"+t,u="aw-watcher-afk_"+t,l=I["a"].windowQuery(c,u,L,L,a,o,r),f=await this._vm.$aw.query(i,l);console.info(`Completed window query in ${d()().diff(s)}ms`),e("query_window_completed",f[0])},async query_browser({state:e,commit:t},{host:n,timeperiod:a,filterAFK:r}){const s=d()();if(e.browser_buckets_available){const i=[F(a)],o="aw-watcher-window_"+n,c="aw-watcher-afk_"+n,u=I["a"].browserSummaryQuery(e.browser_buckets_available,o,c,L,r),l=await this._vm.$aw.query(i,u);console.info(`Completed browser query in ${d()().diff(s)}ms`),t("query_browser_completed",l[0])}},async query_editor({state:e,commit:t},{timeperiod:n}){if(e.editor_buckets_available){const a=[F(n)],r=I["a"].editorActivityQuery(e.editor_buckets_available,100),s=await this._vm.$aw.query(a,r).catch(this.errorHandler);t("query_editor_completed",s[0])}},async query_active_history({commit:e,state:t},{host:n,timeperiod:a}){const r=Y(a).filter(e=>{return!Q()(t.active_history,e)});console.log(r);const s="aw-watcher-afk_"+n,i=d()(),o=await this._vm.$aw.query(r,I["a"].dailyActivityQuery(s)),c=M()(r,D()(o,e=>P()(e,e=>"not-afk"==e.data.status)));console.info(`Completed history query in ${d()().diff(i)}ms`),e("query_active_history_completed",{active_history:c})},async get_buckets({commit:e}){const t=await this._vm.$aw.getBuckets(),n=D()(P()(t,e=>"web.tab.current"===e["type"]),e=>e["id"]),a=D()(P()(t,e=>"app.editor.activity"===e["type"]),e=>e["id"]);e("browser_buckets",n),e("editor_buckets",a)}},K={start_loading(e,t){e.loaded=!0,e.query_options=t,e.top_apps=null,e.top_titles=null,e.browser_duration=0,e.top_domains=null,e.top_urls=null,e.editor_duration=0,e.top_editor_files=null,e.top_editor_languages=null,e.top_editor_projects=null,e.top_categories=null,e.active_duration=null,e.active_events=null},query_window_completed(e,t){e.top_apps=t["app_events"],e.top_titles=t["title_events"],e.top_categories=t["cat_events"],e.active_duration=t["duration"],e.app_chunks=t["app_chunks"],e.active_events=t["active_events"],console.log(e.active_events)},query_browser_completed(e,t){e.top_domains=t["domains"],e.top_urls=t["urls"],e.browser_duration=t["duration"],e.web_chunks=t["chunks"]},query_editor_completed(e,t){e.editor_duration=t["duration"],e.top_editor_files=t["files"],e.top_editor_languages=t["languages"],e.top_editor_projects=t["projects"]},query_active_history_completed(e,{active_history:t}){e.active_history={...e.active_history,...t}},browser_buckets(e,t){e.browser_buckets_available=t},editor_buckets(e,t){e.editor_buckets_available=t}};var Z={namespaced:!0,state:G,getters:V,actions:z,mutations:K};const X={buckets:[]},ee={browserBuckets(e){return _.map(_.filter(e.buckets,e=>"web.tab.current"===e["type"]),e=>e["id"])},getBucket:e=>t=>_.filter(e.buckets,e=>e.id===t)[0],bucketsByHostname:e=>_.groupBy(e.buckets,"hostname")},te={async ensureBuckets({state:e,dispatch:t}){0===e.buckets.length&&await t("loadBuckets")},async loadBuckets({commit:e}){const t=await this._vm.$aw.getBuckets();console.info("Received buckets: ",t),e("update_buckets",t)},async getBucketWithEvents({getters:e,dispatch:t},{id:n,start:a,end:r}){await t("ensureBuckets");const s=e.getBucket(n);return s.events=await this._vm.$aw.getEvents(s.id,{start:a,end:r,limit:-1}),s},async getBucketsWithEvents({state:e,dispatch:t},{start:n,end:a}){await t("ensureBuckets");const r=await Promise.all(_.map(e.buckets,async e=>await t("getBucketWithEvents",{id:e.id,start:n,end:a})));return _.orderBy(r,[e=>e.id],["asc"])},async deleteBucket({dispatch:e},{bucketId:t}){console.log(`Deleting bucket ${t}`),await this._vm.$aw.deleteBucket(t),await e("loadBuckets")}},ne={update_buckets(e,t){e.buckets=t}};var ae={namespaced:!0,state:X,getters:ee,actions:te,mutations:ne},re=n("63ea"),se=n.n(re),ie=n("abdd"),oe=n.n(ie),ce=n("4d8c"),ue=n.n(ce),de=n("a8fc"),le=n.n(de),fe=n("c707"),he=n.n(fe),pe=n("0644"),_e=n.n(pe);const me={classes:[],classes_unsaved_changes:!1},be={classes_hierarchy:e=>{const t=Object(W["build_category_hierarchy"])(_e()(e.classes));return he()(t,[e=>e.id||0])},all_categories:e=>{return le()(ue()(e.classes.map(e=>{const t=[];for(let n=1;n<=e.name.length;n++)t.push(e.name.slice(0,n));return t})),e=>e.join(">>>>"))}},ve={async load({commit:e}){e("loadClasses",await Object(W["loadClasses"])())},async save({state:e,commit:t}){const n=await Object(W["saveClasses"])(e.classes);return t("saveCompleted"),n}},ye={loadClasses(e,t){let n=0;e.classes=t.map(e=>Object.assign(e,{id:n++})),console.log("Loaded classes:",e.classes),e.classes_unsaved_changes=!1},updateClass(e,t){console.log("Updating class:",t);const n=_e()(e.classes[t.id]);void 0===t.id||null===t.id?(t.id=oe()(D()(e.classes,"id"))+1,e.classes.push(t)):Object.assign(e.classes[t.id],t);const a=n.name.length;D()(e.classes,e=>{se()(n.name,e.name.slice(0,a))&&(e.name=t.name.concat(e.name.slice(a)),console.log("Renamed child:",e.name))}),e.classes_unsaved_changes=!0},addClass(e,t){t.id=oe()(D()(e.classes,"id"))+1,e.classes.push(t),e.classes_unsaved_changes=!0},removeClass(e,t){e.classes=e.classes.filter(e=>e.id!==t.id),e.classes_unsaved_changes=!0},restoreDefaultClasses(e){let t=0;e.classes=W["defaultCategories"].map(e=>Object.assign(e,{id:t++})),e.classes_unsaved_changes=!0},saveCompleted(e){e.classes_unsaved_changes=!1}};var ke={namespaced:!0,state:me,getters:be,actions:ve,mutations:ye};a["default"].use(E["a"]);const ge=!1;var we=new E["a"].Store({modules:{activity_daily:Z,buckets:ae,settings:ke},strict:ge});const $e=n("17bb").AWClient;let qe="";const xe=new $e("aw-webui",{testing:!1,baseURL:qe});var Se=xe,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"wrapper"}},[n("aw-header"),n("div",{staticClass:"container aw-container my-3 py-3"},[n("error-boundary",[n("router-view")],1)],1),n("div",{staticClass:"container",staticStyle:{color:"#555"}},[n("div",{staticStyle:{float:"left"}},[e._m(0),n("div",[n("a",{staticClass:"mr-2",attrs:{href:"https://github.com/ActivityWatch/activitywatch",target:"_blank"}},[n("icon",{attrs:{name:"brands/github"}}),e._v("GitHub")],1),n("a",{attrs:{href:"https://twitter.com/ActivityWatchIt",target:"_blank"}},[n("icon",{attrs:{name:"brands/twitter"}}),e._v("Twitter")],1)])]),n("div",{staticStyle:{float:"right","text-align":"right"}},[e._v("Found a bug? "),n("a",{attrs:{href:"https://github.com/ActivityWatch/activitywatch/issues/new"}},[e._v("File an issue")]),n("br"),e._v("Need help? "),n("a",{attrs:{href:"https://forum.activitywatch.net/c/support"}},[e._v("Ask on the forum")]),n("br"),e._v("Missing a feature? "),n("a",{attrs:{href:"https://forum.activitywatch.net/c/features"}},[e._v("Vote on the forum")]),n("br"),e._v("Built something cool? "),n("a",{attrs:{href:"https://forum.activitywatch.net/c/projects"}},[e._v("Share it on the forum")]),n("br"),n("span",{directives:[{name:"show",rawName:"v-show",value:e.info,expression:"info"}],staticClass:"mt-2",staticStyle:{color:"#888","font-size":"0.8em"}},[e._v("Host: "+e._s(e.info.hostname)),n("br"),e._v("Version: "+e._s(e.info.version))])])])],1)},Ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-1"},[e._v("Made with â¤ by the "),n("a",{attrs:{href:"http://activitywatch.net/contributors/"}},[e._v("ActivityWatch developers")])])}],je=(n("1e91"),n("3550"),{data:function(){return{activityViews:[],info:{}}},mounted:async function(){this.$aw.getInfo().then(e=>{this.info=e},e=>{console.error("Unable to connect: ",e),this.info={}})}}),Ee=je,Be=(n("5c0b"),n("2877")),Pe=Object(Be["a"])(Ee,Oe,Ce,!1,null,null,null),Ae=Pe.exports;a["default"].use(r["a"]),a["default"].component("datetime",s["Datetime"]),"startOfDay"in localStorage||(localStorage.startOfDay="04:00"),a["default"].component("icon",()=>Promise.resolve().then(n.bind(null,"0874"))),a["default"].component("error-boundary",()=>n.e("chunk-2d0c7b05").then(n.bind(null,"524f"))),a["default"].component("input-timeinterval",()=>n.e("chunk-2d0c912a").then(n.bind(null,"581b"))),a["default"].component("aw-header",()=>n.e("chunk-30e0364b").then(n.bind(null,"0418"))),a["default"].component("aw-devonly",()=>n.e("chunk-2d0c76ef").then(n.bind(null,"5130"))),a["default"].component("aw-summary",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-88e324ee"),n.e("chunk-64b133d7")]).then(n.bind(null,"b7f1"))),a["default"].component("aw-periodusage",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-0e0e08d4")]).then(n.bind(null,"2aa6"))),a["default"].component("aw-eventlist",()=>n.e("chunk-09bc37bc").then(n.bind(null,"25df"))),a["default"].component("aw-sunburst-categories",()=>n.e("chunk-604b6336").then(n.bind(null,"d31a"))),a["default"].component("aw-sunburst-clock",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-88e324ee"),n.e("chunk-4b8d39cb")]).then(n.bind(null,"b2fc"))),a["default"].component("aw-timeline-inspect",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-88e324ee"),n.e("chunk-0de517b8")]).then(n.bind(null,"4711"))),a["default"].component("aw-timeline",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-88e324ee"),n.e("chunk-481c03fc")]).then(n.bind(null,"90a0"))),a["default"].component("vis-timeline",()=>Promise.all([n.e("chunk-2d0c8a76"),n.e("chunk-88e324ee"),n.e("chunk-a1ed062e")]).then(n.bind(null,"34a5"))),a["default"].component("aw-categorytree",()=>n.e("chunk-34d4cb4e").then(n.bind(null,"ff65"))),a["default"].component("aw-timeline-barchart",()=>n.e("chunk-1704d656").then(n.bind(null,"a698"))),a["default"].mixin(n("8880")),a["default"].prototype.$aw=Se,a["default"].prototype.PRODUCTION=!0,new a["default"]({el:"#app",router:j,render:e=>e(Ae),store:we})},"5acd":function(e,t,n){"use strict";n.r(t),n.d(t,"seconds_to_duration",(function(){return s})),n.d(t,"friendlydate",(function(){return i})),n.d(t,"get_day_start_with_offset",(function(){return o})),n.d(t,"get_day_end_with_offset",(function(){return c})),n.d(t,"get_day_period",(function(){return u})),n.d(t,"get_prev_day",(function(){return d})),n.d(t,"get_next_day",(function(){return l})),n.d(t,"get_offset",(function(){return f})),n.d(t,"get_today",(function(){return h}));var a=n("c1df"),r=n.n(a);function s(e){const t=Math.floor(e/60/60),n=Math.floor(e/60%60),a=Math.floor(e%60),r=[];return 0!=t&&r.push(t+"h"),0!=n&&r.push(n+"m"),0==a&&0!=r.length||r.push(a+"s"),r.join(" ")}function i(e){const t=r()(),n=r.a.parseZone(e),a=r.a.duration(n.diff(t));return-a.asSeconds()<=60?`${Math.round(-a.asSeconds())}s ago`:(a.asSeconds(),a.humanize(!0))}function o(e){const t=e?r()(e):r()().startOf("day"),n=localStorage.startOfDay,a=parseInt(n.split(":")[0]),s=parseInt(n.split(":")[1]);return t.hour(a).minute(s).format()}function c(e){return r()(o(e)).add(1,"days").format()}function u(e){return o(e)+"/"+c(e)}function d(e){return r()(e).add(-1,"days")}function l(e){return r()(e).add(1,"days")}function f(){const e=localStorage.startOfDay,[t,n]=e.split(":");return r.a.duration({hours:t,minutes:n})}function h(){return r()().subtract(f()).startOf("day").format("YYYY-MM-DD")}},"5c0b":function(e,t,n){"use strict";var a=n("8624"),r=n.n(a);r.a},8624:function(e,t,n){},8880:function(e,t,n){"use strict";function a(e,t,n){let a=t;while(a=a.$parent){const r=a.$options.errorCaptured||[];for(const s of r)if(!1===s.call(a,e,t,n))break}}n.r(t),t["default"]={beforeCreate:function(){const e=this,t=this.$options.methods||{};for(var n in t){var r=t[n];t[n]=function(){try{const t=r.apply(this,arguments);return t&&"function"===typeof t.then&&"function"===typeof t.catch?t.catch((function(t){a(t,e,n)})):t}catch(t){a(t,e,n)}}}}}}});
//# sourceMappingURL=index.3f5cb2cb.js.map