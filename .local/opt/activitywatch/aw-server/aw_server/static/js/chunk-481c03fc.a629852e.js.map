{"version":3,"sources":["webpack:///./src/visualizations/TimelineSimple.vue?e696","webpack:///./src/visualizations/TimelineSimple.vue?e8d5","webpack:///./src/visualizations/timeline-simple.js","webpack:///src/visualizations/TimelineSimple.vue","webpack:///./src/visualizations/TimelineSimple.vue?2d85","webpack:///./src/visualizations/TimelineSimple.vue?1605"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","d3","require","Color","_","moment","time","create","svg_el","innerHTML","select","attr","set_status","text","timeline","selectAll","remove","append","update","events","event_type","length","clone","reverse","e_first","first","e_last","last","m_first","timestamp","m_last","total_duration","duration","console","log","format","each","e","i","id","color_base","getColorFromString","getTitleAttr","type","color_hover","darken","hex","x","width","eg","rect","style","on","d","j","n","elem","fill","seconds_to_duration","JSON","stringify","data","name","props","String","Array","watch","timeline_simple","$el","mounted","component"],"mappings":"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","file":"js/chunk-481c03fc.a629852e.js","sourcesContent":["import mod from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineSimple.vue?vue&type=style&index=0&id=6f7b3f34&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineSimple.vue?vue&type=style&index=0&id=6f7b3f34&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\"use strict\";\n\nconst d3 = require(\"d3\");\nconst Color = require(\"color\");\nconst _ = require(\"lodash\");\nconst moment = require(\"moment\");\n\nimport {getTitleAttr, getColorFromString} from \"../util/color.js\";\n\nconst time = require(\"../util/time.js\");\n\nfunction create(svg_el) {\n  // Clear element\n  svg_el.innerHTML = \"\";\n\n  // svg for the colored timeline\n  d3.select(svg_el)\n    .attr(\"viewBox\", \"0 0 100 4\")\n    .attr(\"width\", \"100%\");\n}\n\nfunction set_status(svg_el, text){\n  const timeline = d3.select(svg_el);\n  timeline.selectAll(\"*\").remove();\n\n  timeline.append(\"text\")\n   .attr(\"x\", \"0\")\n   .attr(\"y\", \"3\")\n   .text(text)\n   .attr(\"font-family\", \"sans-serif\")\n   .attr(\"font-size\", \"2\")\n   .attr(\"fill\", \"black\")\n}\n\nfunction update(svg_el, events, event_type) {\n  const timeline = d3.select(svg_el);\n  timeline.selectAll(\"*\").remove();\n\n  if (events.length <= 0){\n    set_status(svg_el, \"No data\");\n    return;\n  }\n\n  events = _.clone(events);\n  _.reverse(events);\n  const e_first = _.first(events);\n  const e_last = _.last(events);\n  const m_first = moment(e_first.timestamp);\n  const m_last = moment(e_last.timestamp);\n  const total_duration = (m_last - m_first) / 1000 + e_last.duration;\n  console.log(\"First: \" + m_first.format());\n  console.log(\"Last: \" + m_last.format());\n  console.log(\"Duration: \" + total_duration);\n\n  // Iterate over each event and create interval boxes\n  _.each(events, function(e, i) {\n    const id = \"timeline_event_\" + i;\n    const timestamp = moment(e.timestamp);\n\n    const color_base = getColorFromString(getTitleAttr({type: event_type}, e));\n    const color_hover = Color(color_base).darken(0.4).hex();\n\n    const x = (timestamp - m_first) / 1000 / total_duration;\n    const width = 100 * e.duration / total_duration;\n\n    const eg = timeline.append(\"g\")\n      .attr(\"id\", id)\n      .attr(\"transform\", \"translate(\" + 100 * x + \",\" + 0 + \")\");\n\n    const rect = eg.append(\"rect\")\n      .attr(\"width\", width)\n      .attr(\"height\", 4)\n      .style(\"fill\", color_base)\n      .on(\"mouseover\", function(d, j, n){\n          const elem = n[j];\n          elem.style.fill = color_hover;\n      })\n      .on(\"mouseout\", function(d, j, n){\n          const elem = n[j];\n          elem.style.fill = color_base;\n      });\n\n    rect.append(\"title\")\n        .text(timestamp.format() + \"\\n\"\n            + \"Duration: \" + time.seconds_to_duration(e.duration) + \"\\n\"\n            + JSON.stringify(e.data));\n\n    if(e.duration > 0.05 * total_duration) {\n      eg.append(\"text\")\n        .attr(\"font-size\", 2)\n        .attr(\"x\", 1)\n        .attr(\"y\", 2.5)\n        .attr(\"pointer-events\", \"none\")\n        .text(getTitleAttr({type: event_type}, e))\n    }\n  });\n\n  return svg_el;\n}\n\nexport default {\n  \"create\": create,\n  \"update\": update,\n};\n","<template lang=\"pug\">\nsvg\n</template>\n\n<style scoped lang=\"scss\">\nsvg {\n    border: 1px solid #999;\n    border-radius: 0.5em;\n}\n</style>\n\n<script>\n// NOTE: This is just a Vue.js component wrapper for timeline-simple.js\n//       Code should generally go in the framework-independent file.\n\nimport timeline_simple from './timeline-simple.js';\n\nexport default {\n  name: \"aw-timeline\",\n  props: {\n    type: String,\n    event_type: String,\n    events: Array,\n  },\n  watch: {\n    \"events\": function() {\n      timeline_simple.update(this.$el, this.events, this.event_type)\n    }\n  },\n  mounted: function() {\n    timeline_simple.create(this.$el);\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineSimple.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineSimple.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimelineSimple.vue?vue&type=template&id=6f7b3f34&scoped=true&lang=pug&\"\nimport script from \"./TimelineSimple.vue?vue&type=script&lang=js&\"\nexport * from \"./TimelineSimple.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimelineSimple.vue?vue&type=style&index=0&id=6f7b3f34&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f7b3f34\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}