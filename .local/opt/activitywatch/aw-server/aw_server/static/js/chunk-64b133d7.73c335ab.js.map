{"version":3,"sources":["webpack:///./src/visualizations/Summary.vue?1751","webpack:///./node_modules/vue-awesome/icons/angle-double-down.js","webpack:///./src/visualizations/Summary.vue?9d6a","webpack:///./src/visualizations/summary.js","webpack:///src/visualizations/Summary.vue","webpack:///./src/visualizations/Summary.vue?812a","webpack:///./src/visualizations/Summary.vue?8d85"],"names":["register","width","height","paths","d","render","_vm","this","_h","$createElement","_c","_self","staticClass","fields","length","with_limit","limit_","attrs","on","$event","_v","_e","staticRenderFns","d3","require","Color","_","create","container","innerHTML","svg","select","append","attr","set_status","msg","svg_elem","querySelector","text","updateSummedEvents","summedEvents","titleKeyFunc","colorKeyFunc","apps","map","e","name","duration","colorKey","update","filter","app","undefined","curr_y","longest_duration","each","i","barHeight","textSize","baseappcolor","getColorFromString","appcolor","lighten","hex","hovercolor","darken","eg","style","seconds_to_duration","props","Array","namefunc","Function","colorfunc","limit","type","Number","default","Boolean","data","watch","mounted","el","$el","children","summary","methods","slice","component"],"mappings":"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","file":"js/chunk-64b133d7.73c335ab.js","sourcesContent":["import mod from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Summary.vue?vue&type=style&index=0&id=36c1fb14&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Summary.vue?vue&type=style&index=0&id=36c1fb14&scoped=true&lang=scss&\"","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  'angle-double-down': {\n    width: 320,\n    height: 512,\n    paths: [\n      {\n        d: 'M143 256.3l-136-136c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.8 22.5c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 0.1zM177 448.3c-9.4 9.4-24.6 9.4-34-0.1l-136-136c-9.4-9.3-9.4-24.5 0-33.9l22.7-22.6c9.3-9.4 24.5-9.4 33.9 0l96.4 96.4 96.5-96.3c9.3-9.4 24.5-9.4 33.9 0l22.6 22.6c9.4 9.3 9.4 24.5 0 33.9z'\n      }\n    ]\n  }\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"aw-summary-container\"}),(_vm.fields && _vm.fields.length > 0 && _vm.with_limit && _vm.fields.length > _vm.limit_)?_c('b-button',{staticClass:\"mt-1\",attrs:{\"size\":\"sm\",\"variant\":\"outline-secondary\"},on:{\"click\":function($event){_vm.limit_ += 5}}},[_c('icon',{attrs:{\"name\":\"angle-double-down\"}}),_vm._v(\"Show more\")],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","'use strict';\n\nconst d3 = require('d3');\nconst Color = require('color');\nconst _ = require('lodash');\n\nimport { getColorFromString } from '../util/color.js';\n\nimport { seconds_to_duration } from '../util/time.js';\n\nfunction create(container) {\n  // Clear element\n  container.innerHTML = '';\n\n  // Create svg canvas\n  const svg = d3.select(container).append('svg');\n  svg\n    .attr('width', '100%')\n    .attr('height', '100px')\n    .attr('class', 'appsummary');\n}\n\nfunction set_status(container, msg) {\n  // Select svg canvas\n  const svg_elem = container.querySelector('.appsummary');\n  const svg = d3.select(svg_elem);\n  svg_elem.innerHTML = '';\n\n  svg\n    .append('text')\n    .attr('x', '0px')\n    .attr('y', '25px')\n    .text(msg)\n    .attr('font-family', 'sans-serif')\n    .attr('font-size', '25px')\n    .attr('fill', 'black');\n}\n\nfunction updateSummedEvents(container, summedEvents, titleKeyFunc, colorKeyFunc) {\n  const apps = _.map(summedEvents, e => {\n    return { name: titleKeyFunc(e), duration: e.duration, colorKey: colorKeyFunc(e) };\n  });\n  update(container, apps);\n}\n\nfunction update(container, apps) {\n  // No apps, sets status to \"No data\"\n  if (apps.length <= 0) {\n    set_status(container, 'No data');\n    return container;\n  }\n\n  const svg_elem = container.querySelector('.appsummary');\n  svg_elem.innerHTML = '';\n  const svg = d3.select(svg_elem);\n\n  // Remove apps without a duration from list\n  apps = apps.filter(function(app) {\n    return app.duration !== undefined;\n  });\n\n  let curr_y = 0;\n  const longest_duration = apps[0].duration;\n  _.each(apps, function(app, i) {\n    // TODO: Expand on click and list titles\n\n    // Variables\n    const width = (app.duration / longest_duration) * 100 + '%';\n    const barHeight = 50;\n    const textSize = 15;\n    const baseappcolor = getColorFromString(app.colorKey || app.name);\n    const appcolor = Color(baseappcolor)\n      .lighten(0.1)\n      .hex();\n    const hovercolor = Color(baseappcolor)\n      .darken(0.1)\n      .hex();\n\n    // The group representing an application in the barchart\n    const eg = svg.append('g');\n    eg.attr('id', 'summary_app_' + i)\n      .on('mouseover', function() {\n        eg.select('rect').style('fill', hovercolor);\n      })\n      .on('mouseout', function() {\n        eg.select('rect').style('fill', appcolor);\n      });\n\n    eg.append('title').text(app.name + '\\n' + seconds_to_duration(app.duration));\n\n    // Color box background\n    eg.append('rect')\n      .attr('x', 0)\n      .attr('y', curr_y)\n      .attr('rx', 5)\n      .attr('ry', 5)\n      .attr('width', width)\n      .attr('height', barHeight)\n      .style('fill', appcolor);\n\n    // App name\n    eg.append('text')\n      .attr('x', 5)\n      .attr('y', curr_y + 5 + textSize)\n      .text(app.name)\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', textSize + 'px')\n      .attr('fill', 'black');\n\n    // Duration\n    eg.append('text')\n      .attr('x', 5)\n      .attr('y', curr_y + 5 + textSize + 5 + textSize)\n      .text(seconds_to_duration(app.duration))\n      .attr('font-family', 'sans-serif')\n      .attr('font-size', textSize + 'px')\n      .attr('fill', 'black');\n\n    curr_y += barHeight + 5;\n  });\n  curr_y -= 5;\n\n  svg.attr('height', curr_y);\n\n  return container;\n}\n\nexport default {\n  create: create,\n  update: update,\n  updateSummedEvents: updateSummedEvents,\n  set_status: set_status,\n};\n","<template lang=\"pug\">\ndiv\n  div.aw-summary-container\n  b-button.mt-1(v-if=\"fields && fields.length > 0 && with_limit && fields.length > limit_\", size=\"sm\", variant=\"outline-secondary\", @click=\"limit_ += 5\")\n    icon(name=\"angle-double-down\")\n    | Show more\n</template>\n\n<style scoped lang=\"scss\">\n.aw-summary-container > svg {\n    border: 1px solid #999;\n    border-radius: 0.5em;\n}\n</style>\n\n<script>\n// NOTE: This is just a Vue.js component wrapper for summary.js\n//       Code should generally go in the framework-independent file.\n\nimport summary from './summary.js';\nimport 'vue-awesome/icons/angle-double-down'\n\nexport default {\n  name: \"aw-summary\",\n  props: {\n    fields: Array,\n    namefunc: Function,\n    colorfunc: Function,\n    limit: {\n      type: Number,\n      default: 5,\n    },\n    with_limit: {\n      type: Boolean,\n      default: false,\n    }\n  },\n  data: function() {\n    return { limit_: this.limit }\n  },\n  watch: {\n    fields: function() {\n      this.update();\n    },\n    limit_: function() {\n      this.update();\n    },\n  },\n  mounted: function() {\n    const el = this.$el.children[0];\n    summary.create(el);\n    this.update();\n  },\n  methods: {\n    update: function() {\n      const el = this.$el.children[0];\n      if(this.fields !== null) {\n        summary.updateSummedEvents(el, this.fields.slice(0, this.limit_), this.namefunc, this.colorfunc)\n      } else {\n        summary.set_status(el, \"Loading...\");\n      }\n    },\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Summary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Summary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Summary.vue?vue&type=template&id=36c1fb14&scoped=true&lang=pug&\"\nimport script from \"./Summary.vue?vue&type=script&lang=js&\"\nexport * from \"./Summary.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Summary.vue?vue&type=style&index=0&id=36c1fb14&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36c1fb14\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}